<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: ApplicationController
  
    &mdash; Katello
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (A)</a> &raquo;
    
    
    <span class="title">ApplicationController</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: ApplicationController
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">ActionController::Base</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActionController::Base</li>
          
            <li class="next">ApplicationController</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="AuthorizationRules.html" title="AuthorizationRules (module)">AuthorizationRules</a></span>, <span class='object_link'><a href="Locale.html" title="Locale (module)">Locale</a></span>, <span class='object_link'><a href="Menu.html" title="Menu (module)">Menu</a></span>, <span class='object_link'><a href="Notifications/ControllerHelper.html" title="Notifications::ControllerHelper (module)">Notifications::ControllerHelper</a></span>, <span class='object_link'><a href="Profiling.html" title="Profiling (module)">Profiling</a></span>, <span class='object_link'><a href="Util/ThreadSession/Controller.html" title="Util::ThreadSession::Controller (module)">Util::ThreadSession::Controller</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">
      <a href="https://github.com/Katello/katello/tree/master/app/controllers/application_controller.rb" target="_blank">
        app/controllers/application_controller.rb
      </a>
    </dd>
  
</dl>
<div class="clear"></div>

<div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="ActivationKeysController.html" title="ActivationKeysController (class)">ActivationKeysController</a></span>, <span class='object_link'><a href="ApplicationInfoController.html" title="ApplicationInfoController (class)">ApplicationInfoController</a></span>, <span class='object_link'><a href="ChangesetsController.html" title="ChangesetsController (class)">ChangesetsController</a></span>, <span class='object_link'><a href="ContentSearchController.html" title="ContentSearchController (class)">ContentSearchController</a></span>, <span class='object_link'><a href="ContentViewDefinitionsController.html" title="ContentViewDefinitionsController (class)">ContentViewDefinitionsController</a></span>, <span class='object_link'><a href="ContentViewVersionsController.html" title="ContentViewVersionsController (class)">ContentViewVersionsController</a></span>, <span class='object_link'><a href="ContentViewsController.html" title="ContentViewsController (class)">ContentViewsController</a></span>, <span class='object_link'><a href="DashboardController.html" title="DashboardController (class)">DashboardController</a></span>, <span class='object_link'><a href="DistributionsController.html" title="DistributionsController (class)">DistributionsController</a></span>, <span class='object_link'><a href="DistributorEventsController.html" title="DistributorEventsController (class)">DistributorEventsController</a></span>, <span class='object_link'><a href="DistributorsController.html" title="DistributorsController (class)">DistributorsController</a></span>, <span class='object_link'><a href="EnvironmentsController.html" title="EnvironmentsController (class)">EnvironmentsController</a></span>, <span class='object_link'><a href="ErrataController.html" title="ErrataController (class)">ErrataController</a></span>, <span class='object_link'><a href="ErrorsController.html" title="ErrorsController (class)">ErrorsController</a></span>, <span class='object_link'><a href="FilterRulesController.html" title="FilterRulesController (class)">FilterRulesController</a></span>, <span class='object_link'><a href="FiltersController.html" title="FiltersController (class)">FiltersController</a></span>, <span class='object_link'><a href="GpgKeysController.html" title="GpgKeysController (class)">GpgKeysController</a></span>, <span class='object_link'><a href="NoticesController.html" title="NoticesController (class)">NoticesController</a></span>, <span class='object_link'><a href="OperationsController.html" title="OperationsController (class)">OperationsController</a></span>, <span class='object_link'><a href="OrganizationsController.html" title="OrganizationsController (class)">OrganizationsController</a></span>, <span class='object_link'><a href="PackagesController.html" title="PackagesController (class)">PackagesController</a></span>, <span class='object_link'><a href="PasswordResetsController.html" title="PasswordResetsController (class)">PasswordResetsController</a></span>, <span class='object_link'><a href="ProductsController.html" title="ProductsController (class)">ProductsController</a></span>, <span class='object_link'><a href="PromotionsController.html" title="PromotionsController (class)">PromotionsController</a></span>, <span class='object_link'><a href="ProvidersController.html" title="ProvidersController (class)">ProvidersController</a></span>, <span class='object_link'><a href="RepositoriesController.html" title="RepositoriesController (class)">RepositoriesController</a></span>, <span class='object_link'><a href="RolesController.html" title="RolesController (class)">RolesController</a></span>, <span class='object_link'><a href="SearchController.html" title="SearchController (class)">SearchController</a></span>, <span class='object_link'><a href="SubscriptionsController.html" title="SubscriptionsController (class)">SubscriptionsController</a></span>, <span class='object_link'><a href="SyncManagementController.html" title="SyncManagementController (class)">SyncManagementController</a></span>, <span class='object_link'><a href="SyncPlansController.html" title="SyncPlansController (class)">SyncPlansController</a></span>, <span class='object_link'><a href="SyncSchedulesController.html" title="SyncSchedulesController (class)">SyncSchedulesController</a></span>, <span class='object_link'><a href="SystemErrataController.html" title="SystemErrataController (class)">SystemErrataController</a></span>, <span class='object_link'><a href="SystemEventsController.html" title="SystemEventsController (class)">SystemEventsController</a></span>, <span class='object_link'><a href="SystemGroupErrataController.html" title="SystemGroupErrataController (class)">SystemGroupErrataController</a></span>, <span class='object_link'><a href="SystemGroupEventsController.html" title="SystemGroupEventsController (class)">SystemGroupEventsController</a></span>, <span class='object_link'><a href="SystemGroupPackagesController.html" title="SystemGroupPackagesController (class)">SystemGroupPackagesController</a></span>, <span class='object_link'><a href="SystemGroupsController.html" title="SystemGroupsController (class)">SystemGroupsController</a></span>, <span class='object_link'><a href="SystemPackagesController.html" title="SystemPackagesController (class)">SystemPackagesController</a></span>, <span class='object_link'><a href="SystemsController.html" title="SystemsController (class)">SystemsController</a></span>, <span class='object_link'><a href="UserSessionsController.html" title="UserSessionsController (class)">UserSessionsController</a></span>, <span class='object_link'><a href="UsersController.html" title="UsersController (class)">UsersController</a></span></p>
</div>







  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#parse_display_message-class_method" title="parse_display_message (class method)">+ (Object) <strong>parse_display_message</strong>(input) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Parse the input provided and return the value of displayMessage.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#check_deleted_org-instance_method" title="#check_deleted_org (instance method)">- (Object) <strong>check_deleted_org</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>TODO this check can be removed once we start deleting sessions during org deletion.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_organization-instance_method" title="#current_organization (instance method)">- (Object) <strong>current_organization</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_organization%3D-instance_method" title="#current_organization= (instance method)">- (Object) <strong>current_organization=</strong>(org) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#current_user-instance_method" title="#current_user (instance method)">- (Object) <strong>current_user</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_label-instance_method" title="#default_label (instance method)">- (Object) <strong>default_label</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>&#39;default_label&#39; is an action that is used to allow the UI to retrieve
a label that is generated by the server based upon a name provided.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_label_assigned-instance_method" title="#default_label_assigned (instance method)">- (Object) <strong>default_label_assigned</strong>(new_object) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Generate a message that may be sent to the user (e.g. via a notice) to inform them that
a label was automatically assigned to the object.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#default_notify_options-instance_method" title="#default_notify_options (instance method)">- (Object) <strong>default_notify_options</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#environment_path_element-instance_method" title="#environment_path_element (instance method)">- (Object) <strong>environment_path_element</strong>(perms_method = nil) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#environment_paths-instance_method" title="#environment_paths (instance method)">- (Object) <strong>environment_paths</strong>(library, environment_path_element_generator) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#escape_html-instance_method" title="#escape_html (instance method)">- (Object) <strong>escape_html</strong>(input) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#execute_after_filters-instance_method" title="#execute_after_filters (instance method)">- (Object) <strong>execute_after_filters</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#execute_rescue-instance_method" title="#execute_rescue (instance method)">- (Object) <strong>execute_rescue</strong>(exception, renderer) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#first_env_in_path-instance_method" title="#first_env_in_path (instance method)">- (Object) <strong>first_env_in_path</strong>(accessible_envs, include_library = false, organization = current_organization) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#flash_to_headers-instance_method" title="#flash_to_headers (instance method)">- (Object) <strong>flash_to_headers</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#format_time-instance_method" title="#format_time (instance method)">- (Object) <strong>format_time</strong>(date, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>formats the date time if the dat is not nil.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#generate_label-instance_method" title="#generate_label (instance method)">- (Object) <strong>generate_label</strong>(object_name, object_type) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Generate a label using the name provided, returning the label and a string with text that may be
sent to the user (e.g. via a notice).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#label_overridden-instance_method" title="#label_overridden (instance method)">- (Object) <strong>label_overridden</strong>(new_object, requested_label) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Generate a message that may be sent to the user (e.g. via a notice) to inform them that
the label that they provided has been overriden to ensure uniqueness.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#library_path_element-instance_method" title="#library_path_element (instance method)">- (Object) <strong>library_path_element</strong>(perms = nil) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#log_exception-instance_method" title="#log_exception (instance method)">- (Object) <strong>log_exception</strong>(exception, level = :error) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#matches_no_redirect%3F-instance_method" title="#matches_no_redirect? (instance method)">- (Boolean) <strong>matches_no_redirect?</strong>(url) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#n_gettext_for_generate_label-instance_method" title="#n_gettext_for_generate_label (instance method)">- (Object) <strong>n_gettext_for_generate_label</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>this is intentionally dead code, it just mark some strings for gettext
so generate_label and default_label_assigned can use them.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#no_env_available_msg-instance_method" title="#no_env_available_msg (instance method)">- (Object) <strong>no_env_available_msg</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#org_not_found_error-instance_method" title="#org_not_found_error (instance method)">- (Object) <strong>org_not_found_error</strong>(exception) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse_calendar_date-instance_method" title="#parse_calendar_date (instance method)">- (Object) <strong>parse_calendar_date</strong>(date_str, time_str = &quot;&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#render_403-instance_method" title="#render_403 (instance method)">- (Object) <strong>render_403</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>render 403 page.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#render_404-instance_method" title="#render_404 (instance method)">- (Object) <strong>render_404</strong>(exception = nil) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>render a 404 page.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#render_bad_parameters-instance_method" title="#render_bad_parameters (instance method)">- (Object) <strong>render_bad_parameters</strong>(exception) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>render bad params.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#render_correct_nav-instance_method" title="#render_correct_nav (instance method)">- (Object) <strong>render_correct_nav</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#render_error-instance_method" title="#render_error (instance method)">- (Object) <strong>render_error</strong>(exception = nil) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>take care of 500 pages too.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#render_panel_direct-instance_method" title="#render_panel_direct (instance method)">- (Object) <strong>render_panel_direct</strong>(obj_class, panel_options, search, start, sort, search_options = {}) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#render_panel_items-instance_method" title="#render_panel_items (instance method)">- (Object) <strong>render_panel_items</strong>(items, options, search, start) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#render_panel_results-instance_method" title="#render_panel_results (instance method)">- (Object) <strong>render_panel_results</strong>(results, total, options) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#requested_action-instance_method" title="#requested_action (instance method)">- (Object) <strong>requested_action</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#require_no_user-instance_method" title="#require_no_user (instance method)">- (Object) <strong>require_no_user</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#require_org-instance_method" title="#require_org (instance method)">- (Object) <strong>require_org</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#require_user-instance_method" title="#require_user (instance method)">- (Object) <strong>require_user</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#retain_search_history-instance_method" title="#retain_search_history (instance method)">- (Object) <strong>retain_search_history</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#search_validate-instance_method" title="#search_validate (instance method)">- (Object) <strong>search_validate</strong>(obj_class, id, search, default = :name) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>verify if the specific object with the given id, matches a given search string.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#section_id-instance_method" title="#section_id (instance method)">- (Object) <strong>section_id</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_layout-instance_method" title="#set_layout (instance method)">- (Object) <strong>set_layout</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#setup_environment_selector-instance_method" title="#setup_environment_selector (instance method)">- (Object) <strong>setup_environment_selector</strong>(org, accessible) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#verify_ldap-instance_method" title="#verify_ldap (instance method)">- (Object) <strong>verify_ldap</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Menu.html" title="Menu (module)">Menu</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Menu.html#included-class_method" title="Menu.included (method)">included</a></span>, <span class='object_link'><a href="Menu.html#prune_menu-instance_method" title="Menu#prune_menu (method)">#prune_menu</a></span>, <span class='object_link'><a href="Menu.html#render_admin_menu-instance_method" title="Menu#render_admin_menu (method)">#render_admin_menu</a></span>, <span class='object_link'><a href="Menu.html#render_main_menu-instance_method" title="Menu#render_main_menu (method)">#render_main_menu</a></span>, <span class='object_link'><a href="Menu.html#render_main_sub_menu-instance_method" title="Menu#render_main_sub_menu (method)">#render_main_sub_menu</a></span>, <span class='object_link'><a href="Menu.html#render_menu-instance_method" title="Menu#render_menu (method)">#render_menu</a></span>, <span class='object_link'><a href="Menu.html#render_notifications_menu-instance_method" title="Menu#render_notifications_menu (method)">#render_notifications_menu</a></span>, <span class='object_link'><a href="Menu.html#render_sublevel_menu-instance_method" title="Menu#render_sublevel_menu (method)">#render_sublevel_menu</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="AuthorizationRules.html" title="AuthorizationRules (module)">AuthorizationRules</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="AuthorizationRules.html#authorize-instance_method" title="AuthorizationRules#authorize (method)">#authorize</a></span>, <span class='object_link'><a href="AuthorizationRules.html#build_bad_params_error_msg-instance_method" title="AuthorizationRules#build_bad_params_error_msg (method)">#build_bad_params_error_msg</a></span>, <span class='object_link'><a href="AuthorizationRules.html#check_array_params-instance_method" title="AuthorizationRules#check_array_params (method)">#check_array_params</a></span>, <span class='object_link'><a href="AuthorizationRules.html#check_hash_params-instance_method" title="AuthorizationRules#check_hash_params (method)">#check_hash_params</a></span>, <span class='object_link'><a href="AuthorizationRules.html#included-class_method" title="AuthorizationRules.included (method)">included</a></span>, <span class='object_link'><a href="AuthorizationRules.html#param_rules-instance_method" title="AuthorizationRules#param_rules (method)">#param_rules</a></span>, <span class='object_link'><a href="AuthorizationRules.html#params_match-instance_method" title="AuthorizationRules#params_match (method)">#params_match</a></span>, <span class='object_link'><a href="AuthorizationRules.html#rules-instance_method" title="AuthorizationRules#rules (method)">#rules</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Util/ThreadSession/Controller.html" title="Util::ThreadSession::Controller (module)">Util::ThreadSession::Controller</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Util/ThreadSession/Controller.html#included-class_method" title="Util::ThreadSession::Controller.included (method)">included</a></span>, <span class='object_link'><a href="Util/ThreadSession/Controller.html#thread_locals-instance_method" title="Util::ThreadSession::Controller#thread_locals (method)">#thread_locals</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Locale.html" title="Locale (module)">Locale</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Locale.html#included-class_method" title="Locale.included (method)">included</a></span>, <span class='object_link'><a href="Locale.html#parse_accept_locale-instance_method" title="Locale#parse_accept_locale (method)">#parse_accept_locale</a></span>, <span class='object_link'><a href="Locale.html#pick_available_locale-instance_method" title="Locale#pick_available_locale (method)">#pick_available_locale</a></span>, <span class='object_link'><a href="Locale.html#pick_available_locale-class_method" title="Locale.pick_available_locale (method)">pick_available_locale</a></span>, <span class='object_link'><a href="Locale.html#set_locale-instance_method" title="Locale#set_locale (method)">#set_locale</a></span>, <span class='object_link'><a href="Locale.html#set_locale-class_method" title="Locale.set_locale (method)">set_locale</a></span>, <span class='object_link'><a href="Locale.html#set_locale_from_header-instance_method" title="Locale#set_locale_from_header (method)">#set_locale_from_header</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Profiling.html" title="Profiling (module)">Profiling</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Profiling.html#do_profiling-instance_method" title="Profiling#do_profiling (method)">#do_profiling</a></span>, <span class='object_link'><a href="Profiling.html#included-class_method" title="Profiling.included (method)">included</a></span>, <span class='object_link'><a href="Profiling.html#load_ruby_prof_gem-class_method" title="Profiling.load_ruby_prof_gem (method)">load_ruby_prof_gem</a></span>, <span class='object_link'><a href="Profiling.html#profiling_enabled%3F-class_method" title="Profiling.profiling_enabled? (method)">profiling_enabled?</a></span>, <span class='object_link'><a href="Profiling.html#run_profiling%3F-instance_method" title="Profiling#run_profiling? (method)">#run_profiling?</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Notifications/ControllerHelper.html" title="Notifications::ControllerHelper (module)">Notifications::ControllerHelper</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Notifications/ControllerHelper.html#notify-instance_method" title="Notifications::ControllerHelper#notify (method)">#notify</a></span></p>

  

  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="parse_display_message-class_method">
  
    + (<tt>Object</tt>) <strong>parse_display_message</strong>(input)  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Parse the input provided and return the value of displayMessage. If displayMessage is not available, return &quot;&quot;.
(Note: this can be used to pull the displayMessage from a Candlepin exception.)
This assumes that the input follows a syntax similar to:
  &quot;is older than existing data\&quot;&quot;</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


683
684
685
686
687
688
689
690</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 683</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_parse_display_message'>parse_display_message</span> <span class='id identifier rubyid_input'>input</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>displayMessage</span><span class='tstring_end'>'</span></span>
      <span class='kw'>return</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_input'>input</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>displayMessage</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_input'>input</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="check_deleted_org-instance_method">
  
    - (<tt>Object</tt>) <strong>check_deleted_org</strong>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>TODO this check can be removed once we start deleting sessions during org deletion</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


297
298
299
300
301</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 297</span>

<span class='kw'>def</span> <span class='id identifier rubyid_check_deleted_org'>check_deleted_org</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_current_organization'>current_organization</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_current_organization'>current_organization</span><span class='period'>.</span><span class='id identifier rubyid_being_deleted?'>being_deleted?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Errors</span><span class='op'>::</span><span class='const'>SecurityViolation</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Current organization is being deleted, switch to a different one.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_organization-instance_method">
  
    - (<tt>Object</tt>) <strong>current_organization</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 198</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_organization'>current_organization</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:current_organization_id</span><span class='rbracket'>]</span>
    <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:current_organization_id</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='kw'>begin</span>
    <span class='kw'>if</span> <span class='ivar'>@current_org</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_current_user'>current_user</span>
      <span class='id identifier rubyid_o'>o</span> <span class='op'>=</span> <span class='const'>Organization</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:current_organization_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_current_user'>current_user</span><span class='period'>.</span><span class='id identifier rubyid_allowed_organizations'>allowed_organizations</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
        <span class='ivar'>@current_org</span> <span class='op'>=</span> <span class='id identifier rubyid_o'>o</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>RecordNotFound</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Permission Denied. User '%{user}' does not have permissions to access organization '%{org}'.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>%</span> <span class='lbrace'>{</span><span class='symbol'>:user</span> <span class='op'>=&gt;</span> <span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_username'>username</span><span class='comma'>,</span> <span class='symbol'>:org</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_o'>o</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbrace'>}</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='ivar'>@current_org</span>
  <span class='kw'>rescue</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>RecordNotFound</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_error'>error</span>
    <span class='id identifier rubyid_log_exception'>log_exception</span> <span class='id identifier rubyid_error'>error</span>
    <span class='id identifier rubyid_session'>session</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:current_organization_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_org_not_found_error'>org_not_found_error</span><span class='lparen'>(</span><span class='id identifier rubyid_error'>error</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_organization=-instance_method">
  
    - (<tt>Object</tt>) <strong>current_organization=</strong>(org) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


219
220
221</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 219</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_organization='>current_organization=</span><span class='lparen'>(</span><span class='id identifier rubyid_org'>org</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:current_organization_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_org'>org</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_user-instance_method">
  
    - (<tt>Object</tt>) <strong>current_user</strong>  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


339
340
341</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 339</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_user'>current_user</span>
  <span class='id identifier rubyid_user'>user</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_label-instance_method">
  
    - (<tt>Object</tt>) <strong>default_label</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>&#39;default_label&#39; is an action that is used to allow the UI to retrieve
a label that is generated by the server based upon a name provided. This action
is used by several controllers, but not all.  For those controllers that do
use it, the controller will determine if access to it is allowed based on the
permissions required by that controller.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


123
124
125
126
127
128
129</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 123</span>

<span class='kw'>def</span> <span class='id identifier rubyid_default_label'>default_label</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:text</span> <span class='op'>=&gt;</span> <span class='const'>Util</span><span class='op'>::</span><span class='const'>Model</span><span class='op'>::</span><span class='id identifier rubyid_labelize'>labelize</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:nothing</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_label_assigned-instance_method">
  
    - (<tt>Object</tt>) <strong>default_label_assigned</strong>(new_object) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Generate a message that may be sent to the user (e.g. via a notice) to inform them that
a label was automatically assigned to the object.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


164
165
166
167
168
169
170
171</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 164</span>

<span class='kw'>def</span> <span class='id identifier rubyid_default_label_assigned'>default_label_assigned</span> <span class='id identifier rubyid_new_object'>new_object</span>
  <span class='id identifier rubyid_object_type'>object_type</span> <span class='op'>=</span> <span class='id identifier rubyid_new_object'>new_object</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
  <span class='comment'># if you modify this string you have to modify it in n_gettext_for_generate_label as well
</span>  <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A label was not provided during </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_object_type'>object_type</span><span class='rbrace'>}</span><span class='tstring_content'> creation; therefore, a label of '%{label}' was </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>automatically assigned. If you would like a different label, please delete the </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_object_type'>object_type</span><span class='rbrace'>}</span><span class='tstring_content'> and recreate it with the desired label.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>return</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='id identifier rubyid_msg'>msg</span><span class='rparen'>)</span> <span class='op'>%</span> <span class='lbrace'>{</span><span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_new_object'>new_object</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_notify_options-instance_method">
  
    - (<tt>Object</tt>) <strong>default_notify_options</strong>  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


692
693
694</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 692</span>

<span class='kw'>def</span> <span class='id identifier rubyid_default_notify_options'>default_notify_options</span>
  <span class='lbrace'>{</span> <span class='symbol'>:organization</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_current_organization'>current_organization</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="environment_path_element-instance_method">
  
    - (<tt>Object</tt>) <strong>environment_path_element</strong>(perms_method = nil)  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


437
438
439
440
441
442
443</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 437</span>

<span class='kw'>def</span> <span class='id identifier rubyid_environment_path_element'>environment_path_element</span><span class='lparen'>(</span><span class='id identifier rubyid_perms_method'>perms_method</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_lambda'>lambda</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a_path'>a_path</span><span class='op'>|</span>
    <span class='lbrace'>{</span> <span class='symbol'>:id</span>     <span class='op'>=&gt;</span> <span class='id identifier rubyid_a_path'>a_path</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span>
      <span class='symbol'>:name</span>   <span class='op'>=&gt;</span> <span class='id identifier rubyid_a_path'>a_path</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
      <span class='symbol'>:select</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_perms_method'>perms_method</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>?</span> <span class='kw'>false</span> <span class='op'>:</span> <span class='id identifier rubyid_a_path'>a_path</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_perms_method'>perms_method</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="environment_paths-instance_method">
  
    - (<tt>Object</tt>) <strong>environment_paths</strong>(library, environment_path_element_generator)  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


449
450
451
452
453
454
455
456
457
458
459
460
461
462</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 449</span>

<span class='kw'>def</span> <span class='id identifier rubyid_environment_paths'>environment_paths</span><span class='lparen'>(</span><span class='id identifier rubyid_library'>library</span><span class='comma'>,</span> <span class='id identifier rubyid_environment_path_element_generator'>environment_path_element_generator</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_paths'>paths</span> <span class='op'>=</span> <span class='id identifier rubyid_current_organization'>current_organization</span><span class='period'>.</span><span class='id identifier rubyid_promotion_paths'>promotion_paths</span>
  <span class='id identifier rubyid_to_ret'>to_ret</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_paths'>paths</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_path'>path</span><span class='op'>|</span>
    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='id identifier rubyid_environment_path_element_generator'>environment_path_element_generator</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_e'>e</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_to_ret'>to_ret</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_library'>library</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_path'>path</span> <span class='kw'>if</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='id identifier rubyid_e'>e</span><span class='lbracket'>[</span><span class='symbol'>:select</span><span class='rbracket'>]</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_paths'>paths</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_to_ret'>to_ret</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_library'>library</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_to_ret'>to_ret</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="escape_html-instance_method">
  
    - (<tt>Object</tt>) <strong>escape_html</strong>(input) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


223
224
225</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 223</span>

<span class='kw'>def</span> <span class='id identifier rubyid_escape_html'>escape_html</span> <span class='id identifier rubyid_input'>input</span>
  <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_escapeHTML'>escapeHTML</span><span class='lparen'>(</span><span class='id identifier rubyid_input'>input</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="execute_after_filters-instance_method">
  
    - (<tt>Object</tt>) <strong>execute_after_filters</strong>  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


634
635
636</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 634</span>

<span class='kw'>def</span> <span class='id identifier rubyid_execute_after_filters'>execute_after_filters</span>
  <span class='id identifier rubyid_flash_to_headers'>flash_to_headers</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="execute_rescue-instance_method">
  
    - (<tt>Object</tt>) <strong>execute_rescue</strong>(exception, renderer)  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


650
651
652
653
654
655
656
657
658
659
660
661
662
663</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 650</span>

<span class='kw'>def</span> <span class='id identifier rubyid_execute_rescue'>execute_rescue</span> <span class='id identifier rubyid_exception'>exception</span><span class='comma'>,</span> <span class='id identifier rubyid_renderer'>renderer</span>
  <span class='id identifier rubyid_log_exception'>log_exception</span> <span class='id identifier rubyid_exception'>exception</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_current_user'>current_user</span>
    <span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span> <span class='op'>=</span> <span class='id identifier rubyid_current_user'>current_user</span>
    <span class='id identifier rubyid_renderer'>renderer</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_exception'>exception</span><span class='rparen'>)</span>
    <span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_execute_after_filters'>execute_after_filters</span>
    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_notify'>notify</span><span class='period'>.</span><span class='id identifier rubyid_warning'>warning</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>You must be logged in to access that page.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_execute_after_filters'>execute_after_filters</span>
    <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='id identifier rubyid_new_user_session_url'>new_user_session_url</span> <span class='kw'>and</span> <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="first_env_in_path-instance_method">
  
    - (<tt>Object</tt>) <strong>first_env_in_path</strong>(accessible_envs, include_library = false, organization = current_organization)  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


638
639
640
641
642
643
644
645
646
647
648</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 638</span>

<span class='kw'>def</span> <span class='id identifier rubyid_first_env_in_path'>first_env_in_path</span><span class='lparen'>(</span><span class='id identifier rubyid_accessible_envs'>accessible_envs</span><span class='comma'>,</span> <span class='id identifier rubyid_include_library'>include_library</span><span class='op'>=</span><span class='kw'>false</span><span class='comma'>,</span> <span class='id identifier rubyid_organization'>organization</span><span class='op'>=</span><span class='id identifier rubyid_current_organization'>current_organization</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_library'>library</span> <span class='kw'>if</span> <span class='id identifier rubyid_include_library'>include_library</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_accessible_envs'>accessible_envs</span><span class='period'>.</span><span class='id identifier rubyid_member?'>member?</span><span class='lparen'>(</span><span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_library'>library</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_promotion_paths'>promotion_paths</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_path'>path</span><span class='op'>|</span>
    <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_env'>env</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_accessible_envs'>accessible_envs</span><span class='period'>.</span><span class='id identifier rubyid_member?'>member?</span><span class='lparen'>(</span><span class='id identifier rubyid_env'>env</span><span class='rparen'>)</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_env'>env</span>
      <span class='kw'>end</span>
    <span class='rbrace'>}</span>
  <span class='rbrace'>}</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="flash_to_headers-instance_method">
  
    - (<tt>Object</tt>) <strong>flash_to_headers</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


183
184
185
186
187
188
189
190
191
192
193
194
195
196</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 183</span>

<span class='kw'>def</span> <span class='id identifier rubyid_flash_to_headers'>flash_to_headers</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@_response</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='kw'>or</span> <span class='ivar'>@_response</span><span class='period'>.</span><span class='id identifier rubyid_response_code'>response_code</span> <span class='op'>==</span> <span class='int'>302</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_flash'>flash</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
  <span class='lbracket'>[</span><span class='symbol'>:error</span><span class='comma'>,</span> <span class='symbol'>:warning</span><span class='comma'>,</span> <span class='symbol'>:success</span><span class='comma'>,</span> <span class='symbol'>:message</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_type'>type</span><span class='op'>|</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='id identifier rubyid_type'>type</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='kw'>or</span> <span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='id identifier rubyid_type'>type</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
      <span class='ivar'>@enc</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='id identifier rubyid_type'>type</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;br \\&gt;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>X-Message</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@enc</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%2B</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;#43;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>X-Message-Type</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
      <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>X-Message-Request-Type</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_requested_action'>requested_action</span>
      <span class='id identifier rubyid_flash'>flash</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>  <span class='comment'># clear the flash
</span>      <span class='kw'>return</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="format_time-instance_method">
  
    - (<tt>Object</tt>) <strong>format_time</strong>(date, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>formats the date time if the dat is not nil</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


229
230
231
232</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 229</span>

<span class='kw'>def</span> <span class='id identifier rubyid_format_time'>format_time</span>  <span class='id identifier rubyid_date'>date</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>return</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_l'>l</span><span class='lparen'>(</span><span class='id identifier rubyid_date'>date</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_date'>date</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="generate_label-instance_method">
  
    - (<tt>Object</tt>) <strong>generate_label</strong>(object_name, object_type) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Generate a label using the name provided, returning the label and a string with text that may be
sent to the user (e.g. via a notice).</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


151
152
153
154
155
156
157
158
159
160</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 151</span>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_label'>generate_label</span> <span class='id identifier rubyid_object_name'>object_name</span><span class='comma'>,</span> <span class='id identifier rubyid_object_type'>object_type</span>
  <span class='comment'># user didn't provide a label, so generate one using the name
</span>  <span class='id identifier rubyid_label'>label</span> <span class='op'>=</span> <span class='const'>Util</span><span class='op'>::</span><span class='const'>Model</span><span class='op'>::</span><span class='id identifier rubyid_labelize'>labelize</span><span class='lparen'>(</span><span class='id identifier rubyid_object_name'>object_name</span><span class='rparen'>)</span>
  <span class='comment'># if you modify this string you have to modify it in n_gettext_for_generate_label as well
</span>  <span class='id identifier rubyid_label_assigned_text'>label_assigned_text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A label was not provided during </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_object_type'>object_type</span><span class='rbrace'>}</span><span class='tstring_content'> creation; therefore, a label of '%{label}' was </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>automatically assigned. If you would like a different label, please delete the </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_object_type'>object_type</span><span class='rbrace'>}</span><span class='tstring_content'> and recreate it with the desired label.</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_label_assigned_text'>label_assigned_text</span> <span class='op'>=</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='id identifier rubyid_label_assigned_text'>label_assigned_text</span><span class='rparen'>)</span> <span class='op'>%</span> <span class='lbrace'>{</span><span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_label'>label</span><span class='rbrace'>}</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_label'>label</span><span class='comma'>,</span> <span class='id identifier rubyid_label_assigned_text'>label_assigned_text</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="label_overridden-instance_method">
  
    - (<tt>Object</tt>) <strong>label_overridden</strong>(new_object, requested_label) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Generate a message that may be sent to the user (e.g. via a notice) to inform them that
the label that they provided has been overriden to ensure uniqueness.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


175
176
177
178
179
180
181</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 175</span>

<span class='kw'>def</span> <span class='id identifier rubyid_label_overridden'>label_overridden</span> <span class='id identifier rubyid_new_object'>new_object</span><span class='comma'>,</span> <span class='id identifier rubyid_requested_label'>requested_label</span>
  <span class='id identifier rubyid_object_type'>object_type</span> <span class='op'>=</span> <span class='id identifier rubyid_new_object'>new_object</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
  <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The label requested is already used by another %s; therefore, a unique label was </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>assigned.  If you would like a different label, please delete the %s and recreate </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>it with a unique label.  Requested label: %s, Assigned label: %s</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>%</span>
    <span class='lbracket'>[</span><span class='id identifier rubyid_object_type'>object_type</span><span class='comma'>,</span> <span class='id identifier rubyid_object_type'>object_type</span><span class='comma'>,</span> <span class='id identifier rubyid_requested_label'>requested_label</span><span class='comma'>,</span> <span class='id identifier rubyid_new_object'>new_object</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="library_path_element-instance_method">
  
    - (<tt>Object</tt>) <strong>library_path_element</strong>(perms = nil)  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


445
446
447</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 445</span>

<span class='kw'>def</span> <span class='id identifier rubyid_library_path_element'>library_path_element</span><span class='lparen'>(</span><span class='id identifier rubyid_perms'>perms</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_environment_path_element'>environment_path_element</span><span class='lparen'>(</span><span class='id identifier rubyid_perms'>perms</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_current_organization'>current_organization</span><span class='period'>.</span><span class='id identifier rubyid_library'>library</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="log_exception-instance_method">
  
    - (<tt>Object</tt>) <strong>log_exception</strong>(exception, level = :error)  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


675
676
677</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 675</span>

<span class='kw'>def</span> <span class='id identifier rubyid_log_exception'>log_exception</span> <span class='id identifier rubyid_exception'>exception</span><span class='comma'>,</span> <span class='id identifier rubyid_level'>level</span> <span class='op'>=</span> <span class='symbol'>:error</span>
  <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span> <span class='id identifier rubyid_level'>level</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_exception'>exception</span><span class='rbrace'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_exception'>exception</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='rbrace'>}</span><span class='tstring_content'>)\n</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_exception'>exception</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_exception'>exception</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="matches_no_redirect?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>matches_no_redirect?</strong>(url)  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


303
304
305</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 303</span>

<span class='kw'>def</span> <span class='id identifier rubyid_matches_no_redirect?'>matches_no_redirect?</span><span class='lparen'>(</span><span class='id identifier rubyid_url'>url</span><span class='rparen'>)</span>
  <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>logout</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>notices/get_new</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_path'>path</span><span class='op'>|</span> <span class='id identifier rubyid_url'>url</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_path'>path</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="n_gettext_for_generate_label-instance_method">
  
    - (<tt>Object</tt>) <strong>n_gettext_for_generate_label</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>this is intentionally dead code, it just mark some strings for gettext
so generate_label and default_label_assigned can use them</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


133
134
135
136
137
138
139
140
141
142
143
144
145
146
147</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 133</span>

<span class='kw'>def</span> <span class='id identifier rubyid_n_gettext_for_generate_label'>n_gettext_for_generate_label</span>
  <span class='comment'># the same string for repository, product, organization, environment (see BZ 886718)
</span>  <span class='const'>N_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A label was not provided during repository creation; therefore, a label of '%{label}' was </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>automatically assigned. If you would like a different label, please delete the </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>repository and recreate it with the desired label.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='const'>N_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A label was not provided during product creation; therefore, a label of '%{label}' was </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>automatically assigned. If you would like a different label, please delete the </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>product and recreate it with the desired label.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='const'>N_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A label was not provided during organization creation; therefore, a label of '%{label}' was </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>automatically assigned. If you would like a different label, please delete the </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>organization and recreate it with the desired label.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='const'>N_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A label was not provided during environment creation; therefore, a label of '%{label}' was </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>automatically assigned. If you would like a different label, please delete the </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>environment and recreate it with the desired label.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="no_env_available_msg-instance_method">
  
    - (<tt>Object</tt>) <strong>no_env_available_msg</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


254
255
256</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 254</span>

<span class='kw'>def</span> <span class='id identifier rubyid_no_env_available_msg'>no_env_available_msg</span>
  <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No environments are currently available in this organization.  Please either add some to the organization or select an organization that has an environment to set user default.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="org_not_found_error-instance_method">
  
    - (<tt>Object</tt>) <strong>org_not_found_error</strong>(exception)  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


665
666
667
668
669
670
671
672</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 665</span>

<span class='kw'>def</span> <span class='id identifier rubyid_org_not_found_error'>org_not_found_error</span> <span class='id identifier rubyid_exception'>exception</span>
  <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='id identifier rubyid_exception'>exception</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
  <span class='id identifier rubyid_execute_after_filters'>execute_after_filters</span>
  <span class='id identifier rubyid_logout'>logout</span>
  <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Your current organization is no longer valid. It is possible that either the organization has been deleted or your permissions revoked, please log back in to continue.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_notify'>notify</span><span class='period'>.</span><span class='id identifier rubyid_warning'>warning</span> <span class='id identifier rubyid_message'>message</span>
  <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='id identifier rubyid_new_user_session_url'>new_user_session_url</span> <span class='kw'>and</span> <span class='kw'>return</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parse_calendar_date-instance_method">
  
    - (<tt>Object</tt>) <strong>parse_calendar_date</strong>(date_str, time_str = &quot;&quot;) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


237
238
239
240
241
242
243
244
245
246
247
248
249
250</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 237</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_calendar_date'>parse_calendar_date</span><span class='lparen'>(</span><span class='id identifier rubyid_date_str'>date_str</span><span class='comma'>,</span> <span class='id identifier rubyid_time_str'>time_str</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_date_str'>date_str</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>

  <span class='id identifier rubyid_event'>event</span> <span class='op'>=</span> <span class='id identifier rubyid_date_str'>date_str</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_time_str'>time_str</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='id identifier rubyid_event'>event</span> <span class='op'>=</span> <span class='id identifier rubyid_event'>event</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span> <span class='op'>+</span> <span class='id identifier rubyid_time_str'>time_str</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_event'>event</span> <span class='op'>=</span> <span class='id identifier rubyid_event'>event</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>12:00 am</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_event'>event</span> <span class='op'>=</span> <span class='id identifier rubyid_event'>event</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span>  <span class='op'>+</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_zone'>zone</span>
  <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_strptime'>strptime</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%m/%d/%Y %I:%M %P %:z</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>rescue</span> <span class='const'>ArgumentError</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid date or time format</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="render_403-instance_method">
  
    - (<tt>Object</tt>) <strong>render_403</strong>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>render 403 page</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


344
345
346
347
348
349
350
351
352</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 344</span>

<span class='kw'>def</span> <span class='id identifier rubyid_render_403'>render_403</span>
  <span class='id identifier rubyid_respond_to'>respond_to</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_format'>format</span><span class='op'>|</span>
    <span class='id identifier rubyid_format'>format</span><span class='period'>.</span><span class='id identifier rubyid_html'>html</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:template</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>common/403</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:layout</span> <span class='op'>=&gt;</span> <span class='op'>!</span><span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_xhr?'>xhr?</span><span class='comma'>,</span> <span class='symbol'>:status</span> <span class='op'>=&gt;</span> <span class='int'>403</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_format'>format</span><span class='period'>.</span><span class='id identifier rubyid_atom'>atom</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_head'>head</span> <span class='int'>403</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_format'>format</span><span class='period'>.</span><span class='id identifier rubyid_xml'>xml</span>  <span class='lbrace'>{</span> <span class='id identifier rubyid_head'>head</span> <span class='int'>403</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_format'>format</span><span class='period'>.</span><span class='id identifier rubyid_json'>json</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_head'>head</span> <span class='int'>403</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="render_404-instance_method">
  
    - (<tt>Object</tt>) <strong>render_404</strong>(exception = nil)  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>render a 404 page</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


355
356
357
358
359
360
361
362
363
364
365
366</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 355</span>

<span class='kw'>def</span> <span class='id identifier rubyid_render_404'>render_404</span><span class='lparen'>(</span><span class='id identifier rubyid_exception'>exception</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_exception'>exception</span>
      <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Rendering 404:</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_exception'>exception</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_respond_to'>respond_to</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_format'>format</span><span class='op'>|</span>
    <span class='id identifier rubyid_format'>format</span><span class='period'>.</span><span class='id identifier rubyid_html'>html</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:template</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>common/404</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:layout</span> <span class='op'>=&gt;</span> <span class='op'>!</span><span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_xhr?'>xhr?</span><span class='comma'>,</span> <span class='symbol'>:status</span> <span class='op'>=&gt;</span> <span class='int'>404</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_format'>format</span><span class='period'>.</span><span class='id identifier rubyid_atom'>atom</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_head'>head</span> <span class='int'>404</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_format'>format</span><span class='period'>.</span><span class='id identifier rubyid_xml'>xml</span>  <span class='lbrace'>{</span> <span class='id identifier rubyid_head'>head</span> <span class='int'>404</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_format'>format</span><span class='period'>.</span><span class='id identifier rubyid_json'>json</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_head'>head</span> <span class='int'>404</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="render_bad_parameters-instance_method">
  
    - (<tt>Object</tt>) <strong>render_bad_parameters</strong>(exception)  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>render bad params</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


369
370
371
372
373
374
375
376
377
378
379
380
381
382
383</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 369</span>

<span class='kw'>def</span> <span class='id identifier rubyid_render_bad_parameters'>render_bad_parameters</span><span class='lparen'>(</span><span class='id identifier rubyid_exception'>exception</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_exception'>exception</span>
      <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Rendering 422:</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_exception'>exception</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_notify'>notify</span><span class='period'>.</span><span class='id identifier rubyid_exception'>exception</span><span class='lparen'>(</span>
          <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid parameters sent in the request for this operation. Please contact a system administrator.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
          <span class='id identifier rubyid_exception'>exception</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_respond_to'>respond_to</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_format'>format</span><span class='op'>|</span>
    <span class='id identifier rubyid_format'>format</span><span class='period'>.</span><span class='id identifier rubyid_html'>html</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:template</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>common/400</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:layout</span> <span class='op'>=&gt;</span> <span class='op'>!</span><span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_xhr?'>xhr?</span><span class='comma'>,</span> <span class='symbol'>:status</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_exception'>exception</span><span class='period'>.</span><span class='id identifier rubyid_status_code'>status_code</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_format'>format</span><span class='period'>.</span><span class='id identifier rubyid_atom'>atom</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_head'>head</span> <span class='id identifier rubyid_exception'>exception</span><span class='period'>.</span><span class='id identifier rubyid_status_code'>status_code</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_format'>format</span><span class='period'>.</span><span class='id identifier rubyid_xml'>xml</span>  <span class='lbrace'>{</span> <span class='id identifier rubyid_head'>head</span> <span class='id identifier rubyid_exception'>exception</span><span class='period'>.</span><span class='id identifier rubyid_status_code'>status_code</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_format'>format</span><span class='period'>.</span><span class='id identifier rubyid_json'>json</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_head'>head</span> <span class='id identifier rubyid_exception'>exception</span><span class='period'>.</span><span class='id identifier rubyid_status_code'>status_code</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="render_correct_nav-instance_method">
  
    - (<tt>Object</tt>) <strong>render_correct_nav</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 265</span>

<span class='kw'>def</span> <span class='id identifier rubyid_render_correct_nav'>render_correct_nav</span>
  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:menu_definition</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_menu_definition'>menu_definition</span><span class='lbracket'>[</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:action</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:admin_menu</span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:menu_back</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='comment'>#the menu definition exists, return true
</span>    <span class='id identifier rubyid_render_admin_menu'>render_admin_menu</span>
  <span class='kw'>elsif</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:menu_definition</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_menu_definition'>menu_definition</span><span class='lbracket'>[</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:action</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:notices_menu</span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:menu_back</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:notifications</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_render_notifications_menu'>render_notifications_menu</span>
  <span class='kw'>else</span>
    <span class='comment'>#the menu definition does not exist, return false
</span>    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:menu_back</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:notifications</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_render_menu'>render_menu</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="render_error-instance_method">
  
    - (<tt>Object</tt>) <strong>render_error</strong>(exception = nil)  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>take care of 500 pages too</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


387
388
389
390
391
392
393
394
395
396
397
398
399
400</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 387</span>

<span class='kw'>def</span> <span class='id identifier rubyid_render_error'>render_error</span><span class='lparen'>(</span><span class='id identifier rubyid_exception'>exception</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_exception'>exception</span>
    <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Rendering 500:</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_exception'>exception</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_notify'>notify</span><span class='period'>.</span><span class='id identifier rubyid_exception'>exception</span> <span class='id identifier rubyid_exception'>exception</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_respond_to'>respond_to</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_format'>format</span><span class='op'>|</span>
    <span class='id identifier rubyid_format'>format</span><span class='period'>.</span><span class='id identifier rubyid_html'>html</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:template</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>common/500</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:layout</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>katello</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:status</span> <span class='op'>=&gt;</span> <span class='int'>500</span><span class='comma'>,</span>
                              <span class='symbol'>:locals</span><span class='op'>=&gt;</span><span class='lbrace'>{</span><span class='symbol'>:error</span><span class='op'>=&gt;</span><span class='id identifier rubyid_exception'>exception</span><span class='rbrace'>}</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_format'>format</span><span class='period'>.</span><span class='id identifier rubyid_atom'>atom</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_head'>head</span> <span class='int'>500</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_format'>format</span><span class='period'>.</span><span class='id identifier rubyid_xml'>xml</span>  <span class='lbrace'>{</span> <span class='id identifier rubyid_head'>head</span> <span class='int'>500</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_format'>format</span><span class='period'>.</span><span class='id identifier rubyid_json'>json</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_head'>head</span> <span class='int'>500</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="render_panel_direct-instance_method">
  
    - (<tt>Object</tt>) <strong>render_panel_direct</strong>(obj_class, panel_options, search, start, sort, search_options = {})  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>search_options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
</ul>

  
    
    
    
    
    
    
    
    
    
    
    
    
    <p class="tag_title">Options Hash (<tt>search_options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:default_field</span>
          <span class="type">(<tt>Object</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>The field that should be used by the search engine when a user performs
a search without specifying field.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:filter</span>
          <span class="type">(<tt>Object</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>Filter to apply to search. Array of hashes.  Each key/value within the hash
is OR&#39;d, whereas each HASH itself is AND&#39;d together</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:load</span>
          <span class="type">(<tt>true</tt>, <tt>false</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>whether or not to load the active record object (defaults to false)</p>
</div>
          
        </li>
      
    </ul>
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 488</span>

<span class='kw'>def</span> <span class='id identifier rubyid_render_panel_direct'>render_panel_direct</span><span class='lparen'>(</span><span class='id identifier rubyid_obj_class'>obj_class</span><span class='comma'>,</span> <span class='id identifier rubyid_panel_options'>panel_options</span><span class='comma'>,</span> <span class='id identifier rubyid_search'>search</span><span class='comma'>,</span> <span class='id identifier rubyid_start'>start</span><span class='comma'>,</span> <span class='id identifier rubyid_sort'>sort</span><span class='comma'>,</span> <span class='id identifier rubyid_search_options'>search_options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_filters'>filters</span> <span class='op'>=</span> <span class='id identifier rubyid_search_options'>search_options</span><span class='lbracket'>[</span><span class='symbol'>:filter</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_load'>load</span> <span class='op'>=</span> <span class='id identifier rubyid_search_options'>search_options</span><span class='lbracket'>[</span><span class='symbol'>:load</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_all_rows'>all_rows</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_skip_render'>skip_render</span> <span class='op'>=</span> <span class='id identifier rubyid_search_options'>search_options</span><span class='lbracket'>[</span><span class='symbol'>:skip_render</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_page_size'>page_size</span> <span class='op'>=</span> <span class='id identifier rubyid_search_options'>search_options</span><span class='lbracket'>[</span><span class='symbol'>:page_size</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_current_user'>current_user</span><span class='period'>.</span><span class='id identifier rubyid_page_size'>page_size</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_search'>search</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_search'>search</span><span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
    <span class='id identifier rubyid_all_rows'>all_rows</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_search_options'>search_options</span><span class='lbracket'>[</span><span class='symbol'>:simple_query</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='const'>Katello</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_simple_search_tokens'>simple_search_tokens</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='id identifier rubyid_search'>search</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_search'>search</span> <span class='op'>=</span> <span class='id identifier rubyid_search_options'>search_options</span><span class='lbracket'>[</span><span class='symbol'>:simple_query</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='comment'>#search = Util::Search::filter_input search
</span>
  <span class='comment'># set the query default field, if one was provided.
</span>  <span class='id identifier rubyid_query_options'>query_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_query_options'>query_options</span><span class='lbracket'>[</span><span class='symbol'>:default_field</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_search_options'>search_options</span><span class='lbracket'>[</span><span class='symbol'>:default_field</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_search_options'>search_options</span><span class='lbracket'>[</span><span class='symbol'>:default_field</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>

  <span class='id identifier rubyid_panel_options'>panel_options</span><span class='lbracket'>[</span><span class='symbol'>:accessor</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_panel_options'>panel_options</span><span class='lbracket'>[</span><span class='symbol'>:columns</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_panel_options'>panel_options</span><span class='lbracket'>[</span><span class='symbol'>:col</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_panel_options'>panel_options</span><span class='lbracket'>[</span><span class='symbol'>:initial_action</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='symbol'>:edit</span>

  <span class='ivar'>@items</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='kw'>begin</span>
    <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='id identifier rubyid_obj_class'>obj_class</span><span class='period'>.</span><span class='id identifier rubyid_search'>search</span> <span class='symbol'>:load</span><span class='op'>=&gt;</span><span class='kw'>false</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_query'>query</span> <span class='kw'>do</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_all_rows'>all_rows</span>
          <span class='id identifier rubyid_all'>all</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_string'>string</span> <span class='id identifier rubyid_search'>search</span><span class='comma'>,</span> <span class='id identifier rubyid_query_options'>query_options</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>

      <span class='id identifier rubyid_sort'>sort</span> <span class='lbrace'>{</span><span class='id identifier rubyid_by'>by</span> <span class='id identifier rubyid_sort'>sort</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_sort'>sort</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='rbrace'>}</span> <span class='kw'>unless</span> <span class='op'>!</span><span class='id identifier rubyid_all_rows'>all_rows</span>

      <span class='id identifier rubyid_filters'>filters</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_filters'>filters</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_filters'>filters</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>Array</span>
      <span class='id identifier rubyid_filters'>filters</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
        <span class='id identifier rubyid_filter'>filter</span>  <span class='symbol'>:terms</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span>
      <span class='rbrace'>}</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_filters'>filters</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

      <span class='id identifier rubyid_size'>size</span> <span class='id identifier rubyid_page_size'>page_size</span> <span class='kw'>if</span> <span class='id identifier rubyid_page_size'>page_size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      <span class='id identifier rubyid_from'>from</span> <span class='id identifier rubyid_start'>start</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_load'>load</span>
      <span class='ivar'>@items</span> <span class='op'>=</span> <span class='id identifier rubyid_obj_class'>obj_class</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='op'>=&gt;</span><span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rbrace'>}</span><span class='rparen'>)</span>
      <span class='comment'>#set total since @items will be just an array
</span>      <span class='id identifier rubyid_panel_options'>panel_options</span><span class='lbracket'>[</span><span class='symbol'>:total_count</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>?</span> <span class='int'>0</span> <span class='op'>:</span> <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_total'>total</span>
      <span class='kw'>if</span> <span class='ivar'>@items</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>!=</span> <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>
        <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Failed to retrieve all </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_obj_class'>obj_class</span><span class='rbrace'>}</span><span class='tstring_content'> search results </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
                               <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='ivar'>@items</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='rbrace'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='rbrace'>}</span><span class='tstring_content'> found.)</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='ivar'>@items</span> <span class='op'>=</span> <span class='id identifier rubyid_results'>results</span>
    <span class='kw'>end</span>

    <span class='comment'>#get total count
</span>    <span class='id identifier rubyid_total'>total</span> <span class='op'>=</span> <span class='id identifier rubyid_obj_class'>obj_class</span><span class='period'>.</span><span class='id identifier rubyid_search'>search</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_query'>query</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_all'>all</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_filters'>filters</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
        <span class='id identifier rubyid_filter'>filter</span>  <span class='symbol'>:terms</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span>
      <span class='rbrace'>}</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_filters'>filters</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='id identifier rubyid_size'>size</span> <span class='int'>1</span>
      <span class='id identifier rubyid_from'>from</span> <span class='int'>0</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_total_count'>total_count</span> <span class='op'>=</span> <span class='id identifier rubyid_total'>total</span><span class='period'>.</span><span class='id identifier rubyid_total'>total</span>

  <span class='kw'>rescue</span> <span class='const'>Tire</span><span class='op'>::</span><span class='const'>Search</span><span class='op'>::</span><span class='const'>SearchRequestFailed</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span><span class='lparen'>(</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_total_count'>total_count</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_panel_options'>panel_options</span><span class='lbracket'>[</span><span class='symbol'>:total_results</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_render_panel_results'>render_panel_results</span><span class='lparen'>(</span><span class='ivar'>@items</span><span class='comma'>,</span> <span class='id identifier rubyid_total_count'>total_count</span><span class='comma'>,</span> <span class='id identifier rubyid_panel_options'>panel_options</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_skip_render'>skip_render</span>
  <span class='kw'>return</span> <span class='ivar'>@items</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="render_panel_items-instance_method">
  
    - (<tt>Object</tt>) <strong>render_panel_items</strong>(items, options, search, start)  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 595</span>

<span class='kw'>def</span> <span class='id identifier rubyid_render_panel_items'>render_panel_items</span><span class='lparen'>(</span><span class='id identifier rubyid_items'>items</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='id identifier rubyid_search'>search</span><span class='comma'>,</span> <span class='id identifier rubyid_start'>start</span><span class='rparen'>)</span>
  <span class='ivar'>@items</span> <span class='op'>=</span> <span class='id identifier rubyid_items'>items</span>

  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:accessor</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:columns</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:col</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:initial_action</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='symbol'>:edit</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_start'>start</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:total_count</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@items</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span>
  <span class='kw'>end</span>

  <span class='comment'># the caller may provide items either based on active record or a list within an array... in the case of an
</span>  <span class='comment'># array, it is assumed to be based upon results from a pulp/candlepin request, in which case search is
</span>  <span class='comment'># not currently supported
</span>  <span class='kw'>if</span> <span class='ivar'>@items</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Relation</span>
    <span class='id identifier rubyid_items_searched'>items_searched</span> <span class='op'>=</span> <span class='ivar'>@items</span><span class='period'>.</span><span class='id identifier rubyid_search_for'>search_for</span><span class='lparen'>(</span><span class='id identifier rubyid_search'>search</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_items_offset'>items_offset</span> <span class='op'>=</span> <span class='id identifier rubyid_items_searched'>items_searched</span><span class='period'>.</span><span class='id identifier rubyid_limit'>limit</span><span class='lparen'>(</span><span class='id identifier rubyid_current_user'>current_user</span><span class='period'>.</span><span class='id identifier rubyid_page_size'>page_size</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_offset'>offset</span><span class='lparen'>(</span><span class='id identifier rubyid_start'>start</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_items_searched'>items_searched</span> <span class='op'>=</span> <span class='ivar'>@items</span>
    <span class='id identifier rubyid_items_offset'>items_offset</span> <span class='op'>=</span> <span class='id identifier rubyid_items_searched'>items_searched</span><span class='lbracket'>[</span><span class='id identifier rubyid_start'>start</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='op'>...</span><span class='id identifier rubyid_start'>start</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='op'>+</span><span class='id identifier rubyid_current_user'>current_user</span><span class='period'>.</span><span class='id identifier rubyid_page_size'>page_size</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:total_results</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_items_searched'>items_searched</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span>
  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:collection</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_items_offset'>items_offset</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:list_partial</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_rendered_html'>rendered_html</span> <span class='op'>=</span> <span class='id identifier rubyid_render_to_string'>render_to_string</span><span class='lparen'>(</span><span class='symbol'>:partial</span><span class='op'>=&gt;</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:list_partial</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:locals</span><span class='op'>=&gt;</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_rendered_html'>rendered_html</span> <span class='op'>=</span> <span class='id identifier rubyid_render_to_string'>render_to_string</span><span class='lparen'>(</span><span class='symbol'>:partial</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>common/list_items</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:locals</span><span class='op'>=&gt;</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:json</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='symbol'>:html</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_rendered_html'>rendered_html</span><span class='comma'>,</span>
                    <span class='symbol'>:results_count</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:total_count</span><span class='rbracket'>]</span><span class='comma'>,</span>
                    <span class='symbol'>:total_items</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:total_results</span><span class='rbracket'>]</span><span class='comma'>,</span>
                    <span class='symbol'>:current_items</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:collection</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='rbrace'>}</span>

  <span class='id identifier rubyid_retain_search_history'>retain_search_history</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="render_panel_results-instance_method">
  
    - (<tt>Object</tt>) <strong>render_panel_results</strong>(results, total, options)  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 569</span>

<span class='kw'>def</span> <span class='id identifier rubyid_render_panel_results'>render_panel_results</span><span class='lparen'>(</span><span class='id identifier rubyid_results'>results</span><span class='comma'>,</span> <span class='id identifier rubyid_total'>total</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:total_count</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>?</span> <span class='int'>0</span> <span class='op'>:</span> <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_total'>total</span>
  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:total_results</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_total'>total</span>
  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:collection</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_results'>results</span>
  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:columns</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:col</span><span class='rbracket'>]</span>
  <span class='ivar'>@items</span> <span class='op'>=</span> <span class='id identifier rubyid_results'>results</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:list_partial</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_rendered_html'>rendered_html</span> <span class='op'>=</span> <span class='id identifier rubyid_render_to_string'>render_to_string</span><span class='lparen'>(</span><span class='symbol'>:partial</span><span class='op'>=&gt;</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:list_partial</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:locals</span><span class='op'>=&gt;</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:render_list_proc</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_rendered_html'>rendered_html</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:render_list_proc</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='ivar'>@items</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_rendered_html'>rendered_html</span> <span class='op'>=</span> <span class='id identifier rubyid_render_to_string'>render_to_string</span><span class='lparen'>(</span><span class='symbol'>:partial</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>common/list_items</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:locals</span><span class='op'>=&gt;</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>end</span>



  <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:json</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='symbol'>:html</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_rendered_html'>rendered_html</span><span class='comma'>,</span>
                    <span class='symbol'>:results_count</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:total_count</span><span class='rbracket'>]</span><span class='comma'>,</span>
                    <span class='symbol'>:total_items</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:total_results</span><span class='rbracket'>]</span><span class='comma'>,</span>
                    <span class='symbol'>:current_items</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:collection</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='rbrace'>}</span>

  <span class='id identifier rubyid_retain_search_history'>retain_search_history</span> <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:no_search_history</span><span class='rbracket'>]</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="requested_action-instance_method">
  
    - (<tt>Object</tt>) <strong>requested_action</strong>  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


402
403
404
405
406</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 402</span>

<span class='kw'>def</span> <span class='id identifier rubyid_requested_action'>requested_action</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_controller_name'>controller_name</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='kw'>or</span> <span class='id identifier rubyid_action_name'>action_name</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_controller_name'>controller_name</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>___</span><span class='tstring_end'>'</span></span> <span class='op'>+</span> <span class='id identifier rubyid_action_name'>action_name</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_no_user-instance_method">
  
    - (<tt>Object</tt>) <strong>require_no_user</strong>  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


330
331
332
333
334
335
336
337</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 330</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_no_user'>require_no_user</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_current_user'>current_user</span>
    <span class='id identifier rubyid_notify'>notify</span><span class='period'>.</span><span class='id identifier rubyid_success'>success</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Welcome Back</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_current_user'>current_user</span><span class='period'>.</span><span class='id identifier rubyid_username'>username</span><span class='comma'>,</span> <span class='symbol'>:persist</span> <span class='op'>=&gt;</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_execute_after_filters'>execute_after_filters</span>
    <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='id identifier rubyid_dashboard_index_url'>dashboard_index_url</span>
    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_org-instance_method">
  
    - (<tt>Object</tt>) <strong>require_org</strong>  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


289
290
291
292
293
294</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 289</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_org'>require_org</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_session'>session</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_current_organization'>current_organization</span>
    <span class='id identifier rubyid_execute_after_filters'>execute_after_filters</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Errors</span><span class='op'>::</span><span class='const'>SecurityViolation</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>User does not belong to an organization.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_user-instance_method">
  
    - (<tt>Object</tt>) <strong>require_user</strong>  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 307</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_user'>require_user</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_current_user'>current_user</span>
    <span class='comment'>#don't redirect if the user is trying to set an org
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:action</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>set_org</span><span class='tstring_end'>'</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:controller</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>user_sessions</span><span class='tstring_end'>'</span></span>
      <span class='comment'>#redirect to originally requested page
</span>      <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:original_uri</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_matches_no_redirect?'>matches_no_redirect?</span><span class='lparen'>(</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:original_uri</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:original_uri</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:original_uri</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='kw'>return</span> <span class='kw'>true</span>
  <span class='kw'>else</span>
    <span class='comment'>#user not logged
</span>    <span class='id identifier rubyid_notify'>notify</span><span class='period'>.</span><span class='id identifier rubyid_warning'>warning</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>You must be logged in to access that page.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

    <span class='comment'>#save original uri and redirect to login page
</span>    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:original_uri</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_fullpath'>fullpath</span>
    <span class='id identifier rubyid_execute_after_filters'>execute_after_filters</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="retain_search_history-instance_method">
  
    - (<tt>Object</tt>) <strong>retain_search_history</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


259
260
261
262
263</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 259</span>

<span class='kw'>def</span> <span class='id identifier rubyid_retain_search_history'>retain_search_history</span>
  <span class='id identifier rubyid_current_user'>current_user</span><span class='period'>.</span><span class='id identifier rubyid_create_or_update_search_history'>create_or_update_search_history</span><span class='lparen'>(</span><span class='const'>URI</span><span class='lparen'>(</span><span class='ivar'>@_request</span><span class='period'>.</span><span class='id identifier rubyid_env'>env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>HTTP_REFERER</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:search</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_error'>error</span>
  <span class='id identifier rubyid_log_exception'>log_exception</span><span class='lparen'>(</span><span class='id identifier rubyid_error'>error</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="search_validate-instance_method">
  
    - (<tt>Object</tt>) <strong>search_validate</strong>(obj_class, id, search, default = :name)  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>verify if the specific object with the given id, matches a given search string</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


466
467
468
469
470
471
472
473
474
475
476
477
478</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 466</span>

<span class='kw'>def</span> <span class='id identifier rubyid_search_validate'>search_validate</span><span class='lparen'>(</span><span class='id identifier rubyid_obj_class'>obj_class</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_search'>search</span><span class='comma'>,</span> <span class='id identifier rubyid_default'>default</span><span class='op'>=</span><span class='symbol'>:name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_obj_class'>obj_class</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='period'>.</span><span class='id identifier rubyid_refresh'>refresh</span>
  <span class='id identifier rubyid_search'>search</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>*</span><span class='tstring_end'>'</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_search'>search</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_search'>search</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
  <span class='id identifier rubyid_search'>search</span> <span class='op'>=</span> <span class='const'>Util</span><span class='op'>::</span><span class='const'>Search</span><span class='op'>::</span><span class='id identifier rubyid_filter_input'>filter_input</span> <span class='id identifier rubyid_search'>search</span>
  <span class='id identifier rubyid_query_options'>query_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_query_options'>query_options</span><span class='lbracket'>[</span><span class='symbol'>:default_field</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_default'>default</span> <span class='kw'>if</span> <span class='id identifier rubyid_default'>default</span>

  <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='id identifier rubyid_obj_class'>obj_class</span><span class='period'>.</span><span class='id identifier rubyid_search'>search</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_query'>query</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_string'>string</span> <span class='id identifier rubyid_search'>search</span><span class='comma'>,</span> <span class='id identifier rubyid_query_options'>query_options</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_filter'>filter</span> <span class='symbol'>:terms</span><span class='comma'>,</span> <span class='symbol'>:id</span><span class='op'>=&gt;</span><span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_total'>total</span> <span class='op'>&gt;</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="section_id-instance_method">
  
    - (<tt>Object</tt>) <strong>section_id</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


114
115
116</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 114</span>

<span class='kw'>def</span> <span class='id identifier rubyid_section_id'>section_id</span>
  <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>generic</span><span class='tstring_end'>'</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_layout-instance_method">
  
    - (<tt>Object</tt>) <strong>set_layout</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32
33
34
35
36</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 30</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_layout'>set_layout</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_current_user'>current_user</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_current_user'>current_user</span><span class='period'>.</span><span class='id identifier rubyid_experimental_ui'>experimental_ui</span> <span class='op'>==</span> <span class='kw'>true</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>katello_experimental</span><span class='tstring_end'>'</span></span>
  <span class='kw'>else</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>katello</span><span class='tstring_end'>'</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="setup_environment_selector-instance_method">
  
    - (<tt>Object</tt>) <strong>setup_environment_selector</strong>(org, accessible)  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 408</span>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_environment_selector'>setup_environment_selector</span> <span class='id identifier rubyid_org'>org</span><span class='comma'>,</span> <span class='id identifier rubyid_accessible'>accessible</span>
  <span class='id identifier rubyid_next_env'>next_env</span> <span class='op'>=</span> <span class='const'>KTEnvironment</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:next_env_id</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:next_env_id</span><span class='rbracket'>]</span>

  <span class='ivar'>@paths</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@paths</span> <span class='op'>=</span> <span class='id identifier rubyid_org'>org</span><span class='period'>.</span><span class='id identifier rubyid_promotion_paths'>promotion_paths</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_tmp_path'>tmp_path</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_org'>org</span><span class='period'>.</span><span class='id identifier rubyid_library'>library</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_tmp_path'>tmp_path</span><span class='rbrace'>}</span>

  <span class='comment'># reject any paths that don't have accessible envs
</span>  <span class='ivar'>@paths</span><span class='period'>.</span><span class='id identifier rubyid_reject!'>reject!</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_path'>path</span><span class='op'>|</span>  <span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span> <span class='op'>&amp;</span> <span class='id identifier rubyid_accessible'>accessible</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span><span class='rbrace'>}</span>

  <span class='ivar'>@paths</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='lbracket'>[</span><span class='id identifier rubyid_org'>org</span><span class='period'>.</span><span class='id identifier rubyid_library'>library</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='ivar'>@paths</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

  <span class='kw'>if</span> <span class='ivar'>@environment</span> <span class='kw'>and</span> <span class='op'>!</span><span class='ivar'>@environment</span><span class='period'>.</span><span class='id identifier rubyid_library?'>library?</span>
    <span class='ivar'>@paths</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_path'>path</span><span class='op'>|</span>
      <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_env'>env</span><span class='op'>|</span>
        <span class='ivar'>@path</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span> <span class='kw'>and</span> <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_env'>env</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='op'>==</span> <span class='ivar'>@environment</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
      <span class='rbrace'>}</span>
    <span class='rbrace'>}</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_next_env'>next_env</span>
    <span class='ivar'>@paths</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_path'>path</span><span class='op'>|</span>
      <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_env'>env</span><span class='op'>|</span>
        <span class='ivar'>@path</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span> <span class='kw'>and</span> <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_env'>env</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='op'>==</span> <span class='id identifier rubyid_next_env'>next_env</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
      <span class='rbrace'>}</span>
    <span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='ivar'>@path</span> <span class='op'>=</span> <span class='ivar'>@paths</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='ivar'>@environment</span> <span class='op'>=</span> <span class='ivar'>@path</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="verify_ldap-instance_method">
  
    - (<tt>Object</tt>) <strong>verify_ldap</strong>  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


284
285
286
287</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/application_controller.rb', line 284</span>

<span class='kw'>def</span> <span class='id identifier rubyid_verify_ldap'>verify_ldap</span>
  <span class='id identifier rubyid_u'>u</span> <span class='op'>=</span> <span class='id identifier rubyid_current_user'>current_user</span>
  <span class='id identifier rubyid_u'>u</span><span class='period'>.</span><span class='id identifier rubyid_verify_ldap_roles'>verify_ldap_roles</span> <span class='kw'>if</span> <span class='lparen'>(</span><span class='const'>Katello</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_ldap_roles'>ldap_roles</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_u'>u</span> <span class='op'>!=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Thu Jun 27 11:22:04 2013 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.6.1 (ruby-1.9.3).
</div>

  </body>
</html>